<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <title>Nisäkkäät Arvauspeli</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    img {
      width: 300px;
      height: auto;
      cursor: pointer;
    }
    .options, .input-area {
      margin-top: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
    }
    #score {
      margin-top: 30px;
      font-size: 1.2em;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Arvaa Nisäkäs</h1>
  <img id="animalImage" src="" alt="Nisäkäs" onclick="showOptions()">
  <div class="options" id="options" style="display:none"></div>
  <div class="input-area">
    <input type="text" id="guessInput" placeholder="Kirjoita eläimen nimi">
    <button onclick="checkTextAnswer()">Tarkista</button>
  </div>
  <div id="score">Pisteet: 0</div>

  <script>
    const animals = [
      "ahma", "hilleri", "hirvi", "hylje", "ilves", "karhu", "jänis", "kettu",
      "kotihiiri", "kärppä", "liito-orava", "lumikko", "majava", "metsäpäästäinen",
      "peltomyyrä", "metsämyyrä", "metsäpeura", "minkki", "mäyrä", "naali", "norppa",
      "näätä", "orava", "piisami", "pohjanlepakko", "poro", "rotta", "rusakko",
      "saukko", "siili", "supikoira", "susi", "tunturisopuli", "valkohäntäpeura",
      "vesimyyrä"
    ];

    let score = 0;
    let currentAnimal = "";

    function getRandomAnimal() {
      return animals[Math.floor(Math.random() * animals.length)];
    }

    function loadNewAnimal() {
      document.getElementById("options").style.display = "none";
      document.getElementById("guessInput").value = "";

      currentAnimal = getRandomAnimal();
      document.getElementById("animalImage").src = `images/${currentAnimal}.jpg`;

      // Choose two other random options
      let options = [currentAnimal];
      while (options.length < 3) {
        let option = getRandomAnimal();
        if (!options.includes(option)) options.push(option);
      }
      options = shuffleArray(options);

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => checkOptionAnswer(opt);
        optionsDiv.appendChild(btn);
      });
    }

    function showOptions() {
      document.getElementById("options").style.display = "block";
    }

    function checkOptionAnswer(selected) {
      if (selected === currentAnimal) {
        score += 0.5;
      }
      updateScore();
      loadNewAnimal();
    }

    function checkTextAnswer() {
      const userInput = document.getElementById("guessInput").value.trim().toLowerCase();
      if (userInput === currentAnimal) {
        score += 1;
      }
      updateScore();
      loadNewAnimal();
    }

    function updateScore() {
      document.getElementById("score").textContent = `Pisteet: ${score}`;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Alku
    loadNewAnimal();
  </script>
</body>
</html>
