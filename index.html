<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <title>Nisäkkäät Arvauspeli</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    img {
      width: 300px;
      height: auto;
      cursor: pointer;
      border-radius: 12px;
    }
    .options, .input-area {
      margin-top: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
    }
    #score {
      margin-top: 30px;
      font-size: 1.2em;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Arvaa Nisäkäs</h1>
  <img id="animalImage" src="" alt="Nisäkäs" onclick="showOptions()">
  <div class="options" id="options" style="display:none"></div>
  <div class="input-area">
    <input type="text" id="guessInput" placeholder="Kirjoita eläimen nimi">
    <button onclick="checkTextAnswer()">Tarkista</button>
  </div>
  <div id="score">Pisteet: 0</div>

  <script>
    const animals = [
      "ahma", "hilleri", "hirvi", "hylje", "ilves", "karhu", "jänis", "kettu",
      "kotihiiri", "kärppä", "liito-orava", "lumikko", "majava", "metsäpäästäinen",
      "peltomyyrä", "metsämyyrä", "metsäpeura", "minkki", "mäyrä", "naali", "norppa",
      "näätä", "orava", "piisami", "pohjanlepakko", "poro", "rotta", "rusakko",
      "saukko", "siili", "supikoira", "susi", "tunturisopuli", "valkohäntäpeura",
      "vesimyyrä"
    ];

    const imageUrls = {
      "ahma": "https://cdn.pixabay.com/photo/2017/09/25/13/12/wolverine-2785074_1280.jpg",
      "hilleri": "https://cdn.pixabay.com/photo/2020/10/22/20/14/polecat-5675950_1280.jpg",
      "hirvi": "https://cdn.pixabay.com/photo/2019/08/16/08/42/moose-4408573_1280.jpg",
      "hylje": "https://cdn.pixabay.com/photo/2017/01/20/00/30/seal-1993799_1280.jpg",
      "ilves": "https://cdn.pixabay.com/photo/2016/11/23/00/40/lynx-1850270_1280.jpg",
      "karhu": "https://cdn.pixabay.com/photo/2020/05/14/17/44/brown-bear-5170703_1280.jpg",
      "jänis": "https://cdn.pixabay.com/photo/2020/04/12/18/46/hare-5033652_1280.jpg",
      "kettu": "https://cdn.pixabay.com/photo/2016/11/22/07/09/fox-1844136_1280.jpg",
      "kotihiiri": "https://cdn.pixabay.com/photo/2016/11/29/02/46/mouse-1867121_1280.jpg",
      "kärppä": "https://cdn.pixabay.com/photo/2020/04/13/17/36/stoat-5036103_1280.jpg",
      "liito-orava": "https://cdn.pixabay.com/photo/2018/05/11/17/50/flying-squirrel-3391295_1280.jpg",
      "lumikko": "https://cdn.pixabay.com/photo/2020/02/09/16/51/stoat-4833912_1280.jpg",
      "majava": "https://cdn.pixabay.com/photo/2016/11/22/19/01/beaver-1846380_1280.jpg",
      "metsäpäästäinen": "https://cdn.pixabay.com/photo/2016/11/21/15/49/shrew-1844675_1280.jpg",
      "peltomyyrä": "https://cdn.pixabay.com/photo/2020/05/15/09/55/vole-5173462_1280.jpg",
      "metsämyyrä": "https://cdn.pixabay.com/photo/2020/05/15/09/55/vole-5173462_1280.jpg",
      "metsäpeura": "https://cdn.pixabay.com/photo/2017/10/10/21/46/reindeer-2836401_1280.jpg",
      "minkki": "https://cdn.pixabay.com/photo/2020/05/15/09/55/mink-5173462_1280.jpg",
      "mäyrä": "https://cdn.pixabay.com/photo/2020/05/15/09/55/badger-5173462_1280.jpg",
      "naali": "https://cdn.pixabay.com/photo/2019/11/04/17/30/arctic-fox-4601343_1280.jpg",
      "norppa": "https://cdn.pixabay.com/photo/2017/01/20/00/30/seal-1993799_1280.jpg",
      "näätä": "https://cdn.pixabay.com/photo/2019/11/04/17/30/marten-4601343_1280.jpg",
      "orava": "https://cdn.pixabay.com/photo/2016/11/29/02/46/squirrel-1867121_1280.jpg",
      "piisami": "https://cdn.pixabay.com/photo/2020/05/15/09/55/muskrat-5173462_1280.jpg",
    };

    let score = 0;
    let currentAnimal = "";

    function getRandomAnimal() {
      return animals[Math.floor(Math.random() * animals.length)];
    }

    function loadNewAnimal() {
      document.getElementById("options").style.display = "none";
      document.getElementById("guessInput").value = "";

      currentAnimal = getRandomAnimal();
      document.getElementById("animalImage").src = imageUrls[currentAnimal] || "https://via.placeholder.com/300x200?text=Nis%C3%A4k%C3%A4s";

      let options = [currentAnimal];
      while (options.length < 3) {
        let option = getRandomAnimal();
        if (!options.includes(option)) options.push(option);
      }
      options = shuffleArray(options);

      const optionsDiv = document.getElementById("options");
      optionsDiv.innerHTML = "";
      options.forEach(opt => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => checkOptionAnswer(opt);
        optionsDiv.appendChild(btn);
      });
    }

    function showOptions() {
      document.getElementById("options").style.display = "block";
    }

    function checkOptionAnswer(selected) {
      if (selected === currentAnimal) {
        score += 0.5;
      }
      updateScore();
      loadNewAnimal();
    }

    function checkTextAnswer() {
      const userInput = document.getElementById("guessInput").value.trim().toLowerCase();
      if (userInput === currentAnimal) {
        score += 1;
      }
      updateScore();
      loadNewAnimal();
    }

    function updateScore() {
      document.getElementById("score").textContent = `Pisteet: ${score}`;
    }

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    loadNewAnimal();
  </script>
</body>
</html>
